# Nuke工作流程

?> Nuke使用独立分辨率，并具有广泛的通道支持，其具备强大的图像处理工具和丰富的3D合成环境。 本文主要介绍学习Nuke前必备的概念。

## Nuke工作流程

Nuke是一套节点合成软件，通过连接功能节点组成图形通道运算网络。 基于节点的合成（Compositing）环境流程，可以在其中连接多种功能节点来读取，处理和操作图像。

![nuke](http://artiststd.xyz/Nuke-compositing-systems01.jpg)

可以在文本编辑器中打开Nuke comp文件，并显示操作流程的顺序命令，这些命令在渲染输出时会被编译执行。（所以Nuke本身具备非常开放的开发功能，如果你懂代码，甚至可以自己编写插件，处理流程，非常的方便）

![nuke](http://artiststd.xyz/Nuke-compositing-systems02.jpg)

在上图中，可以看到一个非常简单的Nuke脚本示例。 两个读取节点读取磁盘上的媒体文件。 效果节点提取遮罩并模糊图像。 合并节点设置为over，将前景图像（输入A）合成在背景图像上（输入B）。 最后，Write节点将完成的合成渲染输出到硬盘，另外还有个Viewer节点，用于将合成流程结果输出到显示器上。

!> 注意：Nuke Assist（助理）不支持Write节点和渲染染场（Render Farm）。

## 支持多种图像格式

Nuke支持多种文件格式，例如：Cineon，TIFF，OpenEXR，HDRI和RAW相机数据（使用dcraw命令行程序），并可以在同一项目使用多种格式合成。

默认情况下，Nuke将所有导入的序列转换为其原生的32位线性RGB色彩空间。

可以使用Colorspace节点强制使用多种颜色模型中的一种，包括sRGB，Cineon，rec709，gamma 1.80 / 2.20，HSV或HSL。 Log2Lin节点可以在对数和线性颜色空间之间进行转换（可实现逆向互转）。


?>  注意：Nuke Assist不支持Colorspace或Log2Lin节点。

不限图像分辨率 – 可以在同一合成项目中自由混合和缩放任何分辨率的元素。例如：使用2k胶片作为PAL格式的视频背景，最终将结果输出为HD1080i。 Nuke会自动调整Viewer查看器 以适应当前的项目显示。

## 完全基于通道进行合成

Nuke可以将每个节点的输出分配为新通道，并传递给下一个节点。在需要使用特定通道（例如：对头发进行颜色校正）时，只需从下方的颜色校正节点中选择包含遮罩的通道即可。

Nuke支持多达1023个通道的图像数据。当合成使用CG渲染的元素时，就会凸显出Nuke强大的通道合成能力，尤其是使用OpenEXR格式渲染的三维图形，更能体现通道合成高效，简要的特点。

![nuke](http://artiststd.xyz/Nuke-compositing-systems03.jpg)


例如：3D部门可以将特定CG元素（Beauty层，填充层，背光，反射，阴影等）的多个光照通道渲染为.exr序列，然后将其导入Nuke，其下方的所有节点均可方便的读取渲染源中各个通道的图形数据。

这样的话，可以选择使用镜面反射层作为特定颜色校正操作的遮罩，那么颜色校正就仅仅作用于CG元素的高光，可以实现非常精细的调节。这种方法具有非常独立，精细的优点 。

> 实际上所有渲染通道和遮罩都可以通过节点中的单个通道进行传递。

## 图像处理

* 8Bit, 16Bit, 和32-Bit（位）图像处理

许多数字合成系统，尤其视频工作站系统，经过大量优化压缩仅处理8位元素（即每个通道具有256个强度值的图像）。

而从诞生就作为电影流程处理工具的Nuke，图像质量是最重要的，Nuke仅支持每通道32位（最高数据级别）元素的处理（具有较低位深度的元素在导入时被转换为每通道32位）。

32位精度，使所有节点在计算中提供更丰富精确的颜色分级和浮点精度。这意味着Nuke可以执行所有操作：从增加伽玛到变换。因此，Nuke相比低位深度系统具有更高的精度。

## 纯3D合成
（2D，3D无缝合成）

许多数字合成系统支持二维工作流程，引入第三方插件或三维支持。 相比之下，Nuke产品提供了强大完整的3D（三维）工作空间，可在原生合成系统内创建、渲染由多边形模型，卡片（图像纹理平面），摄影机，灯光和纹理组成的复杂场景。具备更高的效率，更简洁的操作环境。

![nuke](http://artiststd.xyz/Nuke-compositing-systems04.jpg)

3D工作空间有无数的用途，其中最简单的就是将平面场景投射到三维空间中（Project3d）。 这些场景是2D图像平面排列成曲面形状，然后通过Nuke内的摄相机拍摄并渲染出来，给人一种无缝环境的幻觉。

## 渲染农场（Render Farm）和帧服务器

Nuke支持所有第三方和专有的分布式集群渲染软件。 可快速将NukeX与第三方的集群系统集成，渲染任务可以分发给网络上所有Nuke或NukeX节点，并跨平台渲染。（支持基于Windows、Mac、Linux的节点）
Nuke Studio 自身也有 Frame Server，也可以添加外部渲染节点以更快地处理渲染。